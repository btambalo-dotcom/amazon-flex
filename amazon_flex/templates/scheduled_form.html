{% extends 'base.html' %}{% block content %}
<div class="row justify-content-center">
  <div class="col-md-8">
    <div class="card p-4">
      <h2>{{ 'Editar Corrida' if mode=='edit' else 'Agendar Corrida' }}</h2>
      <form method="post" class="mt-3">
        <div class="mb-3">
          <label class="form-label">Título</label>
          <input type="text" name="title" class="form-control" value="{{ ride.title if ride else '' }}" placeholder="Corrida Amazon Flex" />
        </div>
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Início</label>
            <input type="datetime-local" name="start_dt" class="form-control" value="{{ (ride.start_dt|replace(' ', 'T')) if ride else '' }}" required>
          </div>
          <div class="col-md-6">
            <label class="form-label">Fim (opcional)</label>
            <input type="datetime-local" name="end_dt" class="form-control" value="{{ (ride.end_dt|replace(' ', 'T')) if ride and ride.end_dt else '' }}">
          </div>
        </div>
        <div class="row g-3 mt-1">
          <div class="col-md-4">
            <label class="form-label">Horas previstas</label>
            <input type="number" step="0.1" name="hours_planned" class="form-control" value="{{ ride.hours_planned if ride and ride.hours_planned else '' }}" placeholder="Ex.: 3.5">
          </div>
          <div class="col-md-4">
            <label class="form-label">Valor (R$)</label>
            <input type="number" step="0.01" name="expected_block_pay" class="form-control" value="{{ ride.expected_block_pay if ride and ride.expected_block_pay else '' }}">
          </div>
          <div class="col-md-4">
            <label class="form-label">Gorjetas (R$)</label>
            <input type="number" step="0.01" name="tips" class="form-control" value="{{ ride.tips if ride and ride.tips else '' }}">
          </div>
        </div>
        <div class="row g-3 mt-1">
          <div class="col-md-4">
            <label class="form-label">Combustível (R$)</label>
            <input type="number" step="0.01" name="fuel_cost" class="form-control" value="{{ ride.fuel_cost if ride and ride.fuel_cost else '' }}">
          </div>
          <div class="col-md-4">
            <label class="form-label">Odômetro inicial</label>
            <input type="number" step="0.1" name="odometer_start" class="form-control" value="{{ ride.odometer_start if ride and ride.odometer_start else '' }}">
          </div>
          <div class="col-md-4">
            <label class="form-label">Odômetro final</label>
            <input type="number" step="0.1" name="odometer_end" class="form-control" value="{{ ride.odometer_end if ride and ride.odometer_end else '' }}">
          </div>
        </div>
        <div class="mt-3">
          <label class="form-label">Notas</label>
          <input type="text" name="notes" class="form-control" value="{{ ride.notes if ride and ride.notes else '' }}" placeholder="Observações gerais">
        </div>
        <button class="btn btn-primary mt-3">{{ 'Salvar alterações' if mode=='edit' else 'Salvar' }}</button>
        <a class="btn btn-outline-secondary mt-3" href="{{ url_for('calendar_view') }}">Cancelar</a>
      </form>
    </div>
  </div>
</div>
{% endblock %}
