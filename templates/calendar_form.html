
{% extends 'base.html' %}
{% block content %}
<h1 class="h4">{{ 'Editar agendamento' if event else 'Novo agendamento' }}</h1>
<form method="post" class="mt-3">
  <div class="row g-3">
    <div class="col-md-6">
      <label class="form-label">Título</label>
      <input type="text" name="title" class="form-control" value="{{ (event.title if event else '') }}" required>
    </div>
    <div class="col-md-3">
      <label class="form-label">Início</label>
      <input type="datetime-local" name="start_dt" class="form-control" value="{{ (event.start_dt.strftime('%Y-%m-%dT%H:%M') if event else '') }}" required>
    </div>
    <div class="col-md-3">
      <label class="form-label">Fim (opcional)</label>
      <input type="datetime-local" name="end_dt" class="form-control" value="{{ (event.end_dt.strftime('%Y-%m-%dT%H:%M') if event and event.end_dt else '') }}">
    </div>
    <div class="col-md-3">
      <label class="form-label">Pagamento esperado ($)</label>
      <input type="number" step="0.01" name="expected_block_pay" class="form-control" value="{{ (event.expected_block_pay if event else '') }}">
    </div>
    <div class="col-12">
      <label class="form-label">Notas</label>
      <textarea name="notes" class="form-control" rows="2">{{ (event.notes if event else '') }}</textarea>
    </div>
  </div>
  <div class="mt-3 d-flex gap-2">
    <button class="btn btn-primary" type="submit">Salvar</button>
    <a class="btn btn-secondary" href="{{ url_for('calendar_view') }}">Cancelar</a>
    {% if event %}
    <form method="post" action="{{ url_for('calendar_delete', event_id=event.id) }}" onsubmit="return confirm('Excluir este agendamento?');" class="d-inline">
      <button class="btn btn-outline-danger" type="submit">Excluir</button>
    </form>
    {% endif %}
  </div>
</form>
{% endblock %}
