{% extends 'base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center">
  <h1 class="h4">Turnos</h1>
  <a href="{{ url_for('new_shift') }}" class="btn btn-primary">Novo turno</a>
</div>
<div class="table-responsive mt-3">
  <table class="table table-striped align-middle">
    <thead><tr><th>Data</th><th>Horas</th><th>Corridas</th><th>Ganhos</th><th>Combustível</th><th>Líquido</th><th></th></tr></thead>
    <tbody>
      {% for s in shifts %}
      <tr>
        <td>{{ s.work_date.strftime('%d/%m/%Y') }}</td>
        <td>{{ '%.1f'|format(s.hours()) }}</td>
        <td>{{ s.trips|length }}</td>
        <td>${{ '%.2f'|format(s.total_earnings()) }}</td>
        <td>${{ '%.2f'|format(s.total_fuel()) }}</td>
        <td><strong>${{ '%.2f'|format(s.net_profit()) }}</strong></td>
        <td class="text-end">
          <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('view_shift', shift_id=s.id) }}">Ver</a>
          <a class="btn btn-sm btn-outline-primary" href="{{ url_for('edit_shift', shift_id=s.id) }}">Editar</a>
          <form class="d-inline" method="post" action="{{ url_for('delete_shift', shift_id=s.id) }}" onsubmit="return confirm('Excluir este turno?');">
            <button class="btn btn-sm btn-outline-danger" type="submit">Excluir</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
