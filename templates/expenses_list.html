{% extends 'base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center">
  <h1 class="h4">Despesas</h1>
  <a href="{{ url_for('expenses_new') }}" class="btn btn-primary">+ Nova despesa</a>
</div>
<div class="table-responsive mt-3">
  <table class="table table-striped align-middle">
    <thead><tr><th>Data</th><th>Categoria</th><th>Valor</th><th>Turno</th><th>Notas</th><th></th></tr></thead>
    <tbody>
      {% for e in items %}
      <tr>
        <td>{{ e.exp_date.strftime('%d/%m/%Y') }}</td>
        <td>{{ e.category }}</td>
        <td>${{ '%.2f'|format(e.amount) }}</td>
        <td>{% if e.shift_id %}<a href="{{ url_for('view_shift', shift_id=e.shift_id) }}">#{{ e.shift_id }}</a>{% else %}-{% endif %}</td>
        <td>{{ e.notes or '-' }}</td>
        <td class="text-end">
          <a class="btn btn-sm btn-outline-primary" href="{{ url_for('expenses_edit', expense_id=e.id) }}">Editar</a>
          <form class="d-inline" method="post" action="{{ url_for('expenses_delete', expense_id=e.id) }}" onsubmit="return confirm('Excluir despesa?');">
            <button class="btn btn-sm btn-outline-danger" type="submit">Excluir</button>
          </form>
        </td>
      </tr>
      {% else %}
      <tr><td colspan="6" class="text-muted">Sem despesas registradas.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
