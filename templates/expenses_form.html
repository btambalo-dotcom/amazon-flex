{% extends 'base.html' %}
{% block content %}
<h1 class="h4">{{ 'Editar despesa' if expense else 'Nova despesa' }}</h1>
<form method="post" class="mt-3">
  <div class="row g-3">
    <div class="col-md-3">
      <label class="form-label">Data</label>
      <input type="date" name="exp_date" class="form-control" value="{{ (expense.exp_date if expense else '') }}">
    </div>
    <div class="col-md-3">
      <label class="form-label">Categoria</label>
      <select name="category" class="form-select">
        {% set cats = ['Pedágio','Estacionamento','Manutenção','Lavagem','Acessórios','Outros'] %}
        {% for c in cats %}
          <option value="{{ c }}" {% if expense and expense.category==c %}selected{% endif %}>{{ c }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-md-3">
      <label class="form-label">Valor ($)</label>
      <input type="number" step="0.01" name="amount" class="form-control" value="{{ (expense.amount if expense else '') }}">
    </div>
    <div class="col-md-3">
      <label class="form-label">Turno (opcional)</label>
      <select name="shift_id" class="form-select">
        <option value="">—</option>
        {% for s in shifts %}
          <option value="{{ s.id }}" {% if expense and expense.shift_id==s.id %}selected{% endif %}>{{ s.id }} — {{ s.work_date.strftime('%d/%m/%Y') }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-12">
      <label class="form-label">Notas</label>
      <textarea name="notes" class="form-control" rows="2">{{ (expense.notes if expense else '') }}</textarea>
    </div>
  </div>
  <div class="mt-3 d-flex gap-2">
    <button class="btn btn-primary" type="submit">Salvar</button>
    <a class="btn btn-secondary" href="{{ url_for('expenses_list') }}">Cancelar</a>
  </div>
</form>
{% endblock %}
